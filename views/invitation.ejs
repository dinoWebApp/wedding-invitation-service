<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/css/bootstrap.min.css"
      integrity="sha512-jnSuA4Ss2PkkikSOLtYs8BlYIeeIK1h99ty4YfvRPAlzr377vr3CXDb7sb7eEEBYjDtcYj+AjBH3FLv5uSJuXg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="/css/invitation.css" />
    <link rel="stylesheet" href="/css/sakura.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.css"
      integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
      integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js"
      integrity="sha512-57oZ/vW8ANMjR/KQ6Be9v/+/h6bq9/l3f0Oc7vn6qMqyhvPd1cvKBRWWpzu0QoneImqr2SkmO4MSqU+RpHom3Q=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.3/js/bootstrap.min.js"
      integrity="sha512-ykZ1QQr0Jy/4ZkvKuqWn4iF3lqPZyij9iRv6sGqLRdTPkY69YX6+7wvVGmsdBbiIfN/8OdsI7HABjvEok6ZopQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script src="/js/sakura.js"></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.9.0/slick.min.js"
      integrity="sha512-HGOnQO9+SP1V92SrtZfjqxxtLmVzqZpjFFekvzZVWoiASSQgSr4cw9Kqd2+l8Llp4Gm0G8GIFJ4ddwZilcdb8A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script type="text/javascript" 
    src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=22m6duej17&submodules=geocoder"></script>
    <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=bcadbce6440f7f6a3e88962dbed644a2"></script>
    <script>
      $(function () {
        $("body").sakura();
      });
    </script>
    <title>선미와 건준이의 결혼식</title>
  </head>
  <body>
    <main class="container-fluid p-0">
      <!--Header-->
      <header class="mt-3">
        <div class="d-flex justify-content-center">
          <img
            style="width: 40px; height: auto"
            src="/assets/images/tiara.png"
          />
        </div>
        <div class="text-center">
          <p style="font-size: 18px; color: #d8b5a7; letter-spacing: 9px">
            WEDDING INVITATION
          </p>
        </div>
      </header>

      <!--Name, Date-->
      <section class="d-flex mt-2" style="font-size: 30px; color: #60393a">
        <div class="col-4 d-flex justify-content-end align-items-center">
          <p class="my-auto">김건준</p>
        </div>
        <div class="col-4" style="font-size: 25px">
          <div class="d-flex justify-content-center">
            <div
              class="text-center"
              style="width: 40px; border-bottom: solid 2px"
            >
              <p>10</p>
            </div>
          </div>
          <div class="d-flex justify-content-center">
            <div class="text-center" style="width: 30px">
              <p>05</p>
            </div>
          </div>
        </div>
        <div class="col-4 d-flex justify-content-start align-items-center">
          <p class="my-auto">권선미</p>
        </div>
      </section>

      <!--Main Image-->
      <section class="container-fluid main_img"></section>

      <section
        class="wedding-info hidden"
        style="color: #60393a; font-size: 20px; margin-top: 50px"
      >
        <div class="text-center">
          <p>2024년 10월 05일 토요일 오전 11시 30분</p>
        </div>
        <div class="text-center mt-2">
          <p>칼라디움 웨딩홀 3층 비올라홀</p>
        </div>
      </section>

      <!--Invitation-->
      <section class="invitation hidden">
        <div class="mini_img_container">
          <img src="/assets/images/butterfly.png" />
        </div>
        <div class="banner_container">
          <div class="col-1 text-end">
            <i class="fa-solid fa-heart" style="color: #d8b5a7"></i>
          </div>
          <div class="col-2">
            <div style="height: 50%; border-bottom: solid 2px #d8b5a7"></div>
            <div></div>
          </div>
          <div class="col-6 text-center">
            <p style="font-size: 18px; color: #d8b5a7; letter-spacing: 9px">
              INVITATION
            </p>
          </div>
          <div class="col-2">
            <div style="height: 50%; border-bottom: solid 2px #d8b5a7"></div>
            <div></div>
          </div>
          <div class="col-1 text-start">
            <i class="fa-solid fa-heart" style="color: #d8b5a7"></i>
          </div>
          <div class="col-3"></div>
        </div>
        <div class="text-center">
          <p style="font-size: 20px; color: #d8b5a7; letter-spacing: 9px">
            초대합니다
          </p>
        </div>
      </section>

      <section class="invitation_text hidden">
        <p>같은 생각, 같은 마음으로 지혜롭게 살겠습니다.</p>
        <br />
        <p>저희 두 사람이 소중한 분들을 모시고 사랑의 결실을 이루려 합니다.</p>
        <br />
        <p>한 곳을 바라보며 첫발을 떼는 자리입니다.</p>
        <br />
        <p>그 시작의 자리에 함께해 주시기 바랍니다.</p>
      </section>

      <!--Sub Image-->
      <section class="container-fluid sub_img"></section>

      <section class="hero hidden">
        <p>김수환</p>
        <p>•</p>
        <p>황윤정</p>
        <p>&nbsp;&nbsp;장남&nbsp;</p>
        <p>김건준</p>
        <br />
        <p>권영민</p>
        <p>•</p>
        <p>홍순분</p>
        <p>&nbsp;&nbsp;장녀&nbsp;</p>
        <p>권선미</p>
      </section>

      <section class="calendar">
        <div class="mini_img_container">
          <img src="/assets/images/butterfly.png" />
        </div>
        <div class="banner_container">
          <div class="col-1 text-end">
            <i class="fa-solid fa-heart" style="color: #d8b5a7"></i>
          </div>
          <div class="col-2">
            <div style="height: 50%; border-bottom: solid 2px #d8b5a7"></div>
            <div></div>
          </div>
          <div class="col-6 text-center">
            <p style="font-size: 18px; color: #d8b5a7; letter-spacing: 9px">
              CALENDAR
            </p>
          </div>
          <div class="col-2">
            <div style="height: 50%; border-bottom: solid 2px #d8b5a7"></div>
            <div></div>
          </div>
          <div class="col-1 text-start">
            <i class="fa-solid fa-heart" style="color: #d8b5a7"></i>
          </div>
          <div class="col-3"></div>
        </div>
        <div class="text-center my-2">
          <p style="font-size: large;"><%=weddingMonth%>월</p>
        </div>
        <div class="calendar_container d-flex flex-wrap">
          <div class="calendar_date">
            <p style="color: red">일</p>
          </div>
          <div class="calendar_date">
            <p>월</p>
          </div>
          <div class="calendar_date">
            <p>화</p>
          </div>
          <div class="calendar_date">
            <p>수</p>
          </div>
          <div class="calendar_date">
            <p>목</p>
          </div>
          <div class="calendar_date">
            <p>금</p>
          </div>
          <div class="calendar_date">
            <p>토</p>
          </div>
          <% 
            let days = ['일', '월', '화', '수', '목', '금', '토']; 
            let firstDay = new Date(weddingYear, weddingMonth - 1, 1);
            let lastDay = new Date(weddingYear, weddingMonth, 0);
            let startDay = firstDay.getDay();
            let endDate = lastDay.getDate();
            let date = 1;

            // 첫 번째 주
            for (let i = 0; i < startDay; i++) {
          %>
              <div class="calendar_date">
                <p></p>
              </div>
          <% 
            }

            for (let i = startDay; i < 7; i++) {
              let isSunday = (i % 7 === 0);
              let isWeddingDay = (date === weddingDate);
          %>
              <div class="calendar_date">
                <p class="<%= isSunday ? 'sunday' : '' %> <%= isWeddingDay ? 'heart' : '' %>">
                  <%= date %>
                </p>
              </div>
          <% 
              date++;
            }

            // 나머지 주
            while (date <= endDate) {
              for (let i = 0; i < 7 && date <= endDate; i++) {
                let isSunday = (i % 7 === 0);
                let isWeddingDay = (date === weddingDate);
          %>
                <div class="calendar_date">
                  <p class="<%= isSunday ? 'sunday' : '' %>">
                    <%= date %>
                    <%= isWeddingDay ? '<span class="heart"></span>' : '' %>
                  </p>
                </div>
          <% 
                date++;
              }
            }
          %>
        </div>
      </section>

      <section class="d_day_container">
        <div class="d_day_box">
          <div class="num">
            <p id="days">60</p>
          </div>
          <div class="text">
            <p>Days</p>
          </div>
        </div>
        <div class="d_day_colons">
          <p>:</p>
        </div>
        <div class="d_day_box">
          <div class="num">
            <p id="hours">24</p>
          </div>
          <div class="text">
            <p>Hour</p>
          </div>
        </div>
        <div class="d_day_colons">
          <p>:</p>
        </div>
        <div class="d_day_box">
          <div class="num">
            <p id="minutes">31</p>
          </div>
          <div class="text">
            <p>Min</p>
          </div>
        </div>
        <div class="d_day_colons">
          <p>:</p>
        </div>
        <div class="d_day_box">
          <div class="num">
            <p id="seconds">15</p>
          </div>
          <div class="text">
            <p>Sec</p>
          </div>
        </div>
      </section>
      <section class="d_day_text">
        <p>김건준</p>
        <i class="fa-solid fa-heart" style="color: #d8b5a7"></i>
        <p>권선미</p>
        <p>&nbsp;예식일까지,&nbsp;</p>
        <p class="d_day">00</p>
        <p>일</p>
      </section>

      <!--WEDDING GALLERY-->
      <section class="gallery">
        <div class="mini_img_container">
          <img src="/assets/images/butterfly.png" />
        </div>
        <div class="banner_container">
          <div class="col-1 d-flex justify-content-end align-items-center">
            <i class="fa-solid fa-heart" style="color: #d8b5a7"></i>
          </div>
          <div class="col-2">
            <div style="height: 50%; border-bottom: solid 2px #d8b5a7"></div>
            <div></div>
          </div>
          <div class="col-6 text-center">
            <p style="font-size: 18px; color: #d8b5a7; letter-spacing: 9px">
              WEDDING GALLERY
            </p>
          </div>
          <div class="col-2">
            <div style="height: 50%; border-bottom: solid 2px #d8b5a7"></div>
            <div></div>
          </div>
          <div class="col-1 d-flex justify-content-start align-items-center">
            <i class="fa-solid fa-heart" style="color: #d8b5a7"></i>
          </div>
        </div>
      </section>

      <section class="gallery_container d-flex flex-wrap">
        <% for(let i = 0; i < imgArr.length; i++) {%>
        <div class="col-4 gallery_box">
          <div class="gallery_img_container">
            <img
              class="gallery_img"
              src="/assets/images/gallery/<%=imgArr[i]%>.JPG"
              data-id="<%= i %>"
            />
          </div>
        </div>
        <%}%>
      </section>

      <section class="gallery_img_detail_container mb-3">
        <a href="#" class="close-carousel">
          <i class="fa-solid fa-xmark fs-5" style="color: #eee"></i>
        </a>
        <div class="gallery_img_detail">
          <div
            id="carouselExampleFade"
            class="carousel slide carousel-fade w-100"
          >
            <div class="carousel-inner">
              <% for(let i = 0; i < imgArr.length; i++) { %>
              <div class="carousel-item <% if(imgArr[i] == 0) { %>active <%}%>">
                <img
                  src="/assets/images/gallery/<%=imgArr[i]%>.JPG"
                  class="d-block w-100"
                />
              </div>
              <%}%>
            </div>
            <button
              class="carousel-control-prev"
              type="button"
              data-bs-target="#carouselExampleFade"
              data-bs-slide="prev"
            >
              <span
                class="carousel-control-prev-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Previous</span>
            </button>
            <button
              class="carousel-control-next"
              type="button"
              data-bs-target="#carouselExampleFade"
              data-bs-slide="next"
            >
              <span
                class="carousel-control-next-icon"
                aria-hidden="true"
              ></span>
              <span class="visually-hidden">Next</span>
            </button>
          </div>
        </div>
      </section>

      <section class="location">
        <div class="mini_img_container">
          <img src="/assets/images/butterfly.png" />
        </div>
        <div class="banner_container">
          <div class="col-1 d-flex justify-content-end align-items-center">
            <i class="fa-solid fa-heart" style="color: #d8b5a7"></i>
          </div>
          <div class="col-2">
            <div style="height: 50%; border-bottom: solid 2px #d8b5a7"></div>
            <div></div>
          </div>
          <div class="col-6 text-center">
            <p style="font-size: 18px; color: #d8b5a7; letter-spacing: 9px">
              LOCATION
            </p>
          </div>
          <div class="col-2">
            <div style="height: 50%; border-bottom: solid 2px #d8b5a7"></div>
            <div></div>
          </div>
          <div class="col-1 d-flex justify-content-start align-items-center">
            <i class="fa-solid fa-heart" style="color: #d8b5a7"></i>
          </div>
        </div>
      </section>

      <section class="location_info">
        <p>대구광역시 동구 신서동 495 웨딩칼라디움 3층 비올라홀</p>
        <a href="tel:0539642222" style="margin-top: 10px;">
          <img style="width:30px; margin-top: 10px;" src="/assets/images/call.png" alt="">  
        </a>
        <div id="map"></div>
        <div class="buttons">
          <button class="kakao_nav">카카오맵</button>
        </div>
      </section>

      <div class="intro d-flex align-items-center justify-content-center">
        <div class="name-space d-flex justify-content-center flex-wrap">
          <div class="d-flex align-items-center justify-content-center col-12">
            <p class="name man_first">건</p>
            <p class="name man_second">준</p>
            <div class="mx-2" style="width: 40px">
              <img
                id="heart_gif"
                class="img-fluid"
                src="/assets/images/gif/heart-final.gif"
              />
            </div>
            <p class="name woman_first">선</p>
            <p class="name woman_second">미</p>
          </div>
          <p class="date mt-2">2024.10.05</p>
        </div>
      </div>
    </main>

    <script>
      $(function () {
        function intro() {
          setTimeout(function () {
            $(".man_first").animate(
              {
                color: "black",
              },
              1000
            );
          }, 2000);

          setTimeout(function () {
            $(".man_second").animate(
              {
                color: "black",
              },
              1000
            );
          }, 2300);

          setTimeout(function () {
            $(".woman_first").animate(
              {
                color: "black",
              },
              1000
            );
          }, 3000);

          setTimeout(function () {
            $(".woman_second").animate(
              {
                color: "black",
              },
              1000
            );
          }, 3300);

          setTimeout(function () {
            $(".date").animate(
              {
                color: "#BDBDBD",
              },
              1000
            );
          }, 4000);

          setTimeout(function () {
                  /*$('.intro').slideUp(1000, function(){
              $(this).remove();
          });*/
            $(".intro").fadeTo(1000, 0, function () {
              $(this).remove();
            });
          }, 6000);
        }

        function updateCountDown() {
          const endDate = new Date("2024-10-05T11:30:00+09:00");
          const now = new Date();
          const diff = endDate - now;
          if (diff >= 0) {
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor(
              (diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
            );
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((diff % (1000 * 60)) / 1000);
            $("#days").text(days);
            $(".d_day").text(days);
            $("#hours").text(hours);
            $("#minutes").text(minutes);
            $("#seconds").text(seconds);
          }
        }

        setInterval(updateCountDown, 1000);

        let weddingInfo = $(".wedding-info");
        let invitation = $(".invitation");
        let invitationText = $(".invitation_text");
        let subImg = $(".sub_img");
        let hero = $(".hero");
        $(window).scroll(function () {
          let windowHeight = $(window).height();
          let scrollPosition = $(window).scrollTop();
          let weddingInfoScroll = weddingInfo.offset().top;
          let invitationScroll = invitation.offset().top;
          let invitationTextScroll = invitationText.offset().top;
          let heroScroll = hero.offset().top;

          if (scrollPosition + windowHeight > weddingInfoScroll) {
            weddingInfo.removeClass("hidden").addClass("visible");
          }
          if (scrollPosition + windowHeight > invitationScroll) {
            invitation.removeClass("hidden").addClass("visible");
          }
          if (scrollPosition + windowHeight > invitationTextScroll) {
            invitationText.removeClass("hidden").addClass("visible");
          }
          if (scrollPosition + windowHeight > heroScroll) {
            hero.removeClass("hidden").addClass("visible");
          }
        });

        intro();
        refreshGif();

        let galleryScroll = 0;
        $(".gallery_img").on("click", function () {
          $(".gallery_img_detail_container").addClass("show");
          let imgId = $(this).data("id");
          galleryScroll = $(window).scrollTop();
          // Carousel이 초기화될 때마다 이미지 크기를 체크하고 클래스를 적용하는 함수
          function applyImageClasses() {
            $(".carousel-item img").each(function () {
              let img = $(this);
              let width = img.width();
              let height = img.height();

              img.removeClass("gallery_img_hori gallery_img_verti"); // 기존 클래스 제거

              if (width >= height) {
                img.addClass("gallery_img_hori");
              } else {
                img.addClass("gallery_img_verti");
              }
            });
          }

          // Carousel 이미지를 보여주고 초기화
          $(".carousel").show();
          $("#carouselExampleFade").carousel();

          // 이미지가 로드될 때마다 클래스를 적용
          $(".carousel-item img").on("load", applyImageClasses);

          // 처음 클릭 시에도 클래스를 바로 적용
          applyImageClasses();

          $(".carousel-item").each(function () {
            $(this).removeClass("active");
          });

          $(".carousel-inner").children().eq(imgId).addClass("active");
        });

        $(".close-carousel").on("click", function () {
          $(".gallery_img_detail_container").removeClass("show");
          $(".carousel-item img").each(function () {
            $(this).removeClass("gallery_img_hori gallery_img_verti");
          });
          setTimeout(function () {
            window.scrollTo(0, galleryScroll);
          }, 100);
        });
        const address = '대구 동구 신서동 496 칼라디움웨딩홀';
        let lat = '';
        let lng = '';
        $.ajax({
          url: 'https://dapi.kakao.com/v2/local/search/address.json?query=' + encodeURI(address),
          type: 'GET',
          headers: {
            Authorization: 'KakaoAK 997f179a6b53d7dab449dac42cc4ca01',
          },
          success: function(response) {
            console.log(response);
            lat = response.documents[0].address.y;
            lng = response.documents[0].address.x;
            var container = document.getElementById('map'); //지도를 담을 영역의 DOM 레퍼런스
            var options = { //지도를 생성할 때 필요한 기본 옵션
              center: new kakao.maps.LatLng(lat, lng), //지도의 중심좌표.
              level: 3 //지도의 레벨(확대, 축소 정도)
            };

            var map = new kakao.maps.Map(container, options); //지도 생성 및 객체 리턴 
          },
          error: function(xhr, status, error) {
            console.log(xhr);
          }
        });
        
        $('.kakao_nav').on('click', function(){
          console.log(lat, lng)
          const url = `https://map.kakao.com/link/to/칼라디움웨딩홀,${lat},${lng}`;
          window.open(url, '_blank');
        })
      });

      $(window).on("load", function () {
        $(".gallery_img").each(function () {
          let width = $(this).width();
          let height = $(this).height();
          if (width >= height) {
            $(this).addClass("gallery_img_hori");
          } else {
            $(this).addClass("gallery_img_verti");
          }
        });
      });
      function refreshGif() {
        let gifSource = "/assets/images/gif/heart-final.gif";
        let timestamp = new Date().getTime();
        let queryString = "?t=" + timestamp;
        $("#heart_gif").attr("src", gifSource + queryString);
      }
    </script>
  </body>
</html>
